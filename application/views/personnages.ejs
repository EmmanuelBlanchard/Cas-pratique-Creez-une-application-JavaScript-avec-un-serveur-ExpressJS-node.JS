<%- include ("commons/header") %>
    <h1 class="border rounded-lg bg-dark text-white p-2 m-3">Mes personnages</h1>
    <table class="table">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Nom</th>
            <th scope="col">Classe</th>
            <th scope="col">Armes</th>
          </tr>
        </thead>
        <tbody>
            <% 
            var i = 0;
            for(var personnage in mesPersonnages) {
                i++;
                %>
                <tr>
                    <th scope="row"><%= i %></th>
                    <td><a href="personnage?perso=<%= personnage %>"><%= mesPersonnages[personnage].nom %></a></td>

                    <td>
                        <form method="POST" action="">
                            <select name="classe" onchange="submit()">
                                <% for(var classe in mesClasses) { %>
                                    <option value ="<%= classe %>" title="<%= mesClasses[classe].description %>"
                                     <%= (mesPersonnages[personnage].classe === parseInt(classe)) ? "selected" : "" %>>
                                        <%= mesClasses[classe].nom %> 
                                    </option>
                                <% } %>
                            </select>
                            <input type="hidden" name="perso" value="<%= personnage %>" />
                        </form>
            
                        <% for(var classe in mesClasses) {
                            if(mesPersonnages[personnage].classe === parseInt(classe)){%>
                                <a href="classe?nom=<%= classe %>">
                                Modifier
                                </a>
                            <% } %> 
                        <% } %>   
                    </td>                
                    <td><%= mesPersonnages[personnage].arme %></td>
                </tr>
            <% } %>
        </tbody>
    </table>
<%- include ("commons/footer") %>